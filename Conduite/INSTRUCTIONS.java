/*switch(i){
          case 1 : System.out.println("1. Démarrer la voiture"); 
          rightResponse = "SA";
          response = clavier.nextLine();
          i++; break;
     
          case 2 : System.out.println("2. Continuer tout droit"); 
          rightResponse = "C";
          response = clavier.nextLine();
          i++; break;

          case 3 : System.out.println("3. Ralentir puis tourner à gauche (vous êtes prioritaire)"); 
          rightResponse = "D";
          rightResponse = "V";
          rightResponse = "TSL";
          rightResponse = "TL";
          response = clavier.nextLine();
          i++; break;

          case 4 : System.out.println("4. Continuer tout droit (Il y a une voiture sur l'intersection à droite, vous n'êtes pas prioritaire)"); 
          rightResponse = "C";
          response = clavier.nextLine();
          i++; break;

          case 5 : System.out.println("5. Attention, il y a un dos d'âne !"); 
          rightResponse = "D";
          response = clavier.nextLine();
          i++; break;

          case 6 : System.out.println("6. Continuer tout droit"); 
          rightResponse = "C";
          response = clavier.nextLine();
          i++; break;

          case 7 : System.out.println("7. Il y a un feu rouge, quand il passera au vert, tourner à droite sur l'avenue des Champs-Élysées");
          rightResponse = "SO";
          rightResponse = "V";
          rightResponse = "SA";
          rightResponse = "TSR";
          rightResponse = "TR";
          response = clavier.nextLine();
          i++; break;

          case 8 : System.out.println("Notification : Vous êtes sur une route limitée à 50 km/h"); 
          rightResponse = "B";
          rightResponse = "A";
          response = clavier.nextLine();
          i++; break;

          case 9 : System.out.println("8. Continuer tout droit"); 
          rightResponse = "C";
          response = clavier.nextLine();
          i++; break;

          case 10 : System.out.println("9. Au rond-point, tourner à gauche"); 
          rightResponse = "D";
          rightResponse = "V";
          rightResponse = "TSL";
          rightResponse = "TL";
          response = clavier.nextLine();
          i++; break;

          case 11 : System.out.println("10. Continuer tout droit"); 
          rightResponse = "C";
          response = clavier.nextLine();
          i++; break;

          case 12 : System.out.println("11. Attention, des piétons traversent"); 
          rightResponse = "SO";
          response = clavier.nextLine();
          i++; break;

          case 13 : System.out.println("12. Continuer tout droit"); 
          rightResponse = "C";
          response = clavier.nextLine();
          i++; break;

          case 14 : System.out.println("13. Il y a un feu orange, ralentir, attendre que le feu soit rouge et tourner à gauche sur la voie d'insertion du Périphérique");
          rightResponse = "D";
          rightResponse = "V";
          rightResponse = "TSR";
          rightResponse = "CR"; 
          response = clavier.nextLine();
          i++; break;

          case 15 : System.out.println("Notification : Vous êtes sur le Périphérique, limité à 70 km/h"); 
          rightResponse = "A";
          response = clavier.nextLine();
          i++; break;

          case 16 : System.out.println("14. Continuer tout droit"); 
          rightResponse = "C";
          response = clavier.nextLine();
          i++; break;

          case 17 : System.out.println("15. Vous êtes sur la voie de droite, une voiture devant vous est trop lente, dépasser la voiture"); 
          rightResponse = "C";
          rightResponse = "V";
          rightResponse = "TSL";
          rightResponse = "CL";
          response = clavier.nextLine();
          i++; break;

          case 18 : System.out.println("16. Attention, il y a un bouchon, veuillez ralentir, prévenir les autres conducteurs à l'arrière, puis s'arrêter"); 
          response = clavier.nextLine();
          i++; break;

          case 19 : System.out.println("17. Insérez-vous dans la voie de droite, pour prendre la sortie A6"); 
          response = clavier.nextLine();
          i++; break;

          case 20 : System.out.println("18. Continuer tout droit, vous entrez dans un tunnel"); 
          response = clavier.nextLine();
          i++; break;

          case 21 : System.out.println("Notification : Vous êtes sur une route limitée à 110 km/h."); 
          response = clavier.nextLine();
          i++; break;

          case 22 : System.out.println("19. Continuer tout droit sur 10 km"); 
          response = clavier.nextLine();
          i++; break;

          case 23 : System.out.println("20. Vous êtes sur la voie de droite, un véhicule de police cherche à vous dépasser, laissez passer le véhicule en vous déportant sur la gauche"); 
          response = clavier.nextLine();
          i++; break;

          case 24 : System.out.println("21. Continuer tout droit"); 
          response = clavier.nextLine();
          i++; break;

          case 25 : System.out.println("22. Prenez la sortie en direction d'Orly"); 
          response = clavier.nextLine();
          i++; break;

          case 26 : System.out.println("Notification : Vous êtes sur une route limitée à 50 km/h"); 
          response = clavier.nextLine();
          i++; break;

          case 27 : System.out.println("23. Continuer tout droit"); 
          response = clavier.nextLine();
          i++; break;

          case 28 : System.out.println("24. Tournez à droite en direction de l'aéroport d'Orly"); 
          response = clavier.nextLine();
          i++; break;

          case 29 : System.out.println("Notification : Vous êtes sur une route limitée à 30 km/h"); 
          response = clavier.nextLine();
          i++; break;

          case 30 : System.out.println("25. Continuer tout droit après le rond-point"); 
          response = clavier.nextLine();
          i++; break;

          case 31 : System.out.println("26. Virez à droite pour entrer dans le parking"); 
          response = clavier.nextLine();
          i++; break;

          case 32 : System.out.println("27. Garez la voiture en marche arrière"); 
          response = clavier.nextLine();
          i++; break;

          case 33 : System.out.println("28. Coupez le moteur"); 
          response = clavier.nextLine();
          i++; break;

          case 34 : System.out.println("Vous êtes arrivé(e) !!!"); 
          response = clavier.nextLine();
          i++; break;

          default : System.out.println("Instruction non reconnue.");
          break;

        }
 * 
 */



import java.util.ArrayList;
import java.util.HashSet;
import java.util.List;
import java.util.Map;
import java.util.Scanner;

public class INSTRUCTIONS {

    private List<String> instructions;
    private List<List<String>> correctAnswers;

    public INSTRUCTIONS() {
        instructions = new ArrayList<>();
        correctAnswers = new ArrayList<>();

       
        instructions.add("1. Démarrer la voiture");
        correctAnswers.add(List.of("SA")); 

        instructions.add("2. Continuer tout droit");
        correctAnswers.add(List.of("A", "C")); //vitesse de 30km/h

        instructions.add("3. Ralentir puis tourner à gauche (vous êtes prioritaire)");
        correctAnswers.add(List.of("D", "V", "TSL", "TL")); //vitesse de 10km/h

        instructions.add("4. Continuer tout droit (Il y a une voiture sur l'intersection à droite, vous n'êtes pas prioritaire)");
        correctAnswers.add(List.of("A", "C")); //vitesse de 30km/h

        instructions.add("5. Attention, il y a un dos d'âne !");
        correctAnswers.add(List.of("D")); //vitesse de 10 km/h

        instructions.add("6. Continuer tout droit");
        correctAnswers.add(List.of("A", "C")); //vitesse de 30km/h

        instructions.add("7. Il y a un feu rouge, quand il passera au vert, tourner à droite sur l'avenue des Champs-Élysées");
        correctAnswers.add(List.of("SO", "V", "SA", "TSR", "TR")); //vitesse de 10km/h

        instructions.add("9. Au rond-point, tourner à gauche");
        correctAnswers.add(List.of("D", "V", "TSL", "TL")); //vitesse de 10km/h

        instructions.add("10. Continuer tout droit");
        correctAnswers.add(List.of("A", "C")); //vitesse de 30km/h

        instructions.add("11. Attention, des piétons traversent");
        correctAnswers.add(List.of("D", "SO")); //vitesse de 0km/h

        instructions.add("12. Continuer tout droit");
        correctAnswers.add(List.of("A", "C")); //vitesse de 20km/h

        instructions.add("13. Il y a un feu orange, ralentir, attendre que le feu soit rouge et tourner à gauche sur la voie d'insertion du Périphérique");
        correctAnswers.add(List.of("D","V", "TSR", "CR")); //vitesse de 10km/h

        instructions.add("Notification : Vous êtes sur le Périphérique, limité à 70 km/h");

        instructions.add("14. Continuer tout droit");
        correctAnswers.add(List.of("A", "A", "C")); //vitesse de 50km/h

        instructions.add("15. Vous êtes sur la voie de droite, une voiture devant vous est trop lente, dépasser la voiture");
        correctAnswers.add(List.of("C", "V", "A", "TSL", "CL")); //vitesse de 70km/h

        instructions.add("16. Attention, il y a un bouchon, veuillez ralentir, prévenir les autres conducteurs à l'arrière, puis s'arrêter");
        correctAnswers.add(List.of("D", "D", "WS")); //vitesse de 30km/h

        instructions.add("17. Insérez-vous dans la voie de droite, pour prendre la sortie A6");
        correctAnswers.add(List.of("D", "V", "TSR", "CR")); //vitesse de 10km/h

        instructions.add("18. Continuer tout droit, vous entrez dans un tunnel");
        correctAnswers.add(List.of("A", "C", "LB")); //vitesse de 30km/h

        instructions.add("Notification : Vous êtes sur une route limitée à 110 km/h.");

        instructions.add("19. Continuer tout droit sur 10 km");
        correctAnswers.add(List.of("A", "A", "A", "C")); //vitesse de 90km/h

        instructions.add("20. Vous êtes sur la voie de droite, un véhicule de police cherche à vous dépasser, laissez passer le véhicule en vous déportant sur la gauche");
        correctAnswers.add(List.of("D", "V", "TSL", "CL")); //vitesse de 70km/h

        instructions.add("21. Continuer tout droit");
        correctAnswers.add(List.of("A", "C")); //vitesse de 90km/h

        instructions.add("22. Prenez la sortie en direction d'Orly");
        correctAnswers.add(List.of("D", "V", "TSR", "CR")); //vitesse de 70km/h

        instructions.add("Notification : Vous êtes sur une route limitée à 50 km/h");

        instructions.add("23. Continuer tout droit");
        correctAnswers.add(List.of("D", "C"));

        instructions.add("24. Tournez à droite en direction de l'aéroport d'Orly");
        correctAnswers.add(List.of("D", "V", "TSR", "TR")); //vitesse de 30km/h

        instructions.add("Notification : Vous êtes sur une route limitée à 30 km/h");
        correctAnswers.add(List.of("C"));

        instructions.add("25. Continuer tout droit après le rond-point");
        correctAnswers.add(List.of("C"));

        instructions.add("26. Virez à droite pour entrer dans le parking");
        correctAnswers.add(List.of("D", "V", "TSR", "TR")); //vitesse de 10km/h

        instructions.add("27. Garez la voiture en marche arrière");
        correctAnswers.add(List.of("SO", "V", "R")); //vitesse de 0km/h

        instructions.add("28. Coupez le moteur");
        correctAnswers.add(List.of("SO"));

        instructions.add("Vous êtes arrivé(e) !!!");
        correctAnswers.add(new ArrayList<>());

    }

    

    public int runInstructions(CONDUITE voiture) {
        Scanner clavier = voiture.getScanner();
        int score = 0;

        for (int i = 0; i < instructions.size(); i++) {
    System.out.println("---------------------------------------------------");
    System.out.println("Raccourcis disponibles :");
    for (Map.Entry<String, String> entry : voiture.getShortcuts().entrySet()) {
        System.out.printf("%-4s : %s\n", entry.getKey(), entry.getValue());
    }

    System.out.println("\nInstruction : " + instructions.get(i));

    // Sauter les notifications
    if (instructions.get(i).startsWith("Notification")) {
        System.out.println("(Aucune action requise)");
        continue;
    }

    List<String> expected = correctAnswers.get(i); 
    List<String> responses = new ArrayList<>();

    for (int j = 0; j < expected.size(); j++) {
        System.out.print("Commande " + (j + 1) + " : ");
        String response = clavier.nextLine().toUpperCase().trim();
        responses.add(response);

        // Adapter la vitesse
        switch(response) {
            case "A": voiture.setSpeed(voiture.getSpeed() + 20); break;
            case "D": voiture.setSpeed(voiture.getSpeed() - 20); break;
            case "SA": voiture.setSpeed(10); break;
            case "ST": voiture.setSpeed(0); break;
        }
    }

    if (new HashSet<>(responses).equals(new HashSet<>(expected))) {
        System.out.println("Toutes les commandes sont correctes !");
        score++;
    } else {
        System.out.println("Mauvaises commandes.");
        System.out.println("Vous avez entré : " + responses);
        System.out.println("Réponses attendues : " + expected);
        score--;
    }

    System.out.println("Vitesse actuelle : " + voiture.getSpeed() + " km/h");
    System.out.println("Score actuel : " + score + "\n");
}

        

        return score;
    }
}
